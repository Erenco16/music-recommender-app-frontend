(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[852],{1884:()=>{},3263:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>v,dynamic:()=>N});var n=a(5155),o=a(2115);let s="https://st7zxdu7ti.execute-api.eu-north-1.amazonaws.com",i=null,r=null;async function l(){if(i&&r&&Date.now()<r)return i;let e=await fetch("https://eu-north-1tghnjih8v.auth.eu-north-1.amazoncognito.com/oauth2/token",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded",Authorization:"Basic "+btoa("".concat("3s092bu7p5c5e51j47rtn65jfp",":").concat("1ntsjhst4pkjddsae1oqh6rag66nmbu9uoian7qkdnqqsdedf2b8"))},body:new URLSearchParams({grant_type:"client_credentials"})});if(!e.ok)throw Error("Failed to authenticate with Cognito");let t=await e.json();return i=t.access_token,r=Date.now()+1e3*t.expires_in,i}async function c(){return localStorage.getItem("spotify_access_token")}async function d(e){var t;let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=await l();console.log("Fetching API:","".concat(s).concat(e)),console.log("Options:",JSON.stringify(a,null,2));let o=await fetch("".concat(s).concat(e),{...a,headers:{...null!==(t=a.headers)&&void 0!==t?t:{},Authorization:"Bearer ".concat(n),"Content-Type":"application/json"}});if(console.log("Raw Response Object:",o),!o||"function"!=typeof o.json)throw console.error("Invalid response format detected:",o),Error("Invalid response format from fetchWithAuth");let i=await o.json();if(console.log("Parsed JSON Data:",i),!o.ok)throw Error("API error: ".concat(o.status," - ").concat(i.message||"Unknown error"));return i}async function m(e){var t;let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=await c(),o=await fetch("".concat("https://api.spotify.com").concat(e),{...a,headers:{...null!==(t=a.headers)&&void 0!==t?t:{},Authorization:"Bearer ".concat(n),"Content-Type":"application/json"}});if(!o.ok)throw Error("API error: ".concat(o.status));return o.json()}async function h(e){return await d("/recommend?search=".concat(encodeURIComponent(e)),{})}async function u(e){try{var t;console.log("Sending Genre Data:",JSON.stringify(e,null,2));let a=await d("/recommend/genre",{method:"POST",credentials:"include",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(localStorage.getItem("spotify_access_token"))},body:JSON.stringify(e)});return console.log("Final Parsed Data:",a),{matchedGenres:a.matched_genres||[],recommendedArtists:(null===(t=a.recommended_artists)||void 0===t?void 0:t.map(e=>e.name))||[]}}catch(e){return console.error("Error fetching genre recommendations:",e),{matchedGenres:[],recommendedArtists:[]}}}async function p(){return await m("/v1/me/following?type=artist&limit=50")}var x=a(6046),f=a(2888),g=a(8422),y=a(778),w=a(5683);function j(){let e=(0,x.useRouter)(),[t,a]=(0,o.useState)(!1),s=()=>{localStorage.removeItem("spotify_access_token"),localStorage.removeItem("spotify_token_expiration"),e.replace("/")};return(0,n.jsxs)(y.P.header,{initial:{opacity:0,y:-50},animate:{opacity:1,y:0},transition:{duration:.6,ease:"easeOut"},className:"w-full bg-gray-900 text-white p-4 flex justify-between items-center shadow-md relative fixed top-0 left-0 z-50 ".concat("font-[Inter]"),style:{background:"linear-gradient(to bottom, #1a1a1a, #0d0d0d)",borderBottom:"2px solid #0d0d0d"},children:[(0,n.jsx)("div",{className:"flex items-center gap-2",children:(0,n.jsx)("h1",{className:"text-lg sm:text-xl font-bold tracking-wide",children:"Music Recommender"})}),(0,n.jsxs)(y.P.button,{whileHover:{scale:1.1},whileTap:{scale:.9},onClick:s,className:"hidden sm:flex items-center gap-2 bg-red-500 px-4 py-2 rounded-md text-sm font-medium hover:bg-red-600 transition",children:[(0,n.jsx)(f.QeK,{className:"text-lg"}),"Logout"]}),(0,n.jsx)(y.P.button,{whileTap:{scale:.9,rotate:90},onClick:()=>a(!t),className:"sm:hidden z-50",children:t?(0,n.jsx)(g.U_s,{className:"text-3xl"}):(0,n.jsx)(g.TF4,{className:"text-3xl"})}),(0,n.jsx)(w.N,{children:t&&(0,n.jsx)(y.P.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{duration:.3,ease:"easeOut"},className:"absolute top-full left-0 w-full bg-gray-900 flex flex-col items-center gap-4 p-4 sm:hidden shadow-lg",children:(0,n.jsxs)(y.P.button,{whileHover:{scale:1.1},whileTap:{scale:.9},onClick:s,className:"flex items-center gap-2 bg-red-500 px-4 py-2 rounded-md text-sm font-medium hover:bg-red-600 transition",children:[(0,n.jsx)(f.QeK,{className:"text-lg"}),"Logout"]})})})]})}var b=a(5788);a(1884);let N="force-static";function v(){let[e,t]=(0,o.useState)("Metallica"),[a,s]=(0,o.useState)([]),[i,r]=(0,o.useState)(null),[l,c]=(0,o.useState)([]),[d,m]=(0,o.useState)(null),[f,g]=(0,o.useState)(null),[w,N]=(0,o.useState)(!1),[v,_]=(0,o.useState)(!1),S=(0,x.useRouter)();async function k(){try{_(!0),m(null);let e=await p(),{recommendedArtists:t}=await u(e);c(t.slice(0,10))}catch(e){m(e instanceof Error?e.message:String(e))}finally{_(!1)}}async function I(){if(e.trim()){N(!0),g(null);try{let t=await h(e);s(t.artists||[]),r(t.matched_artist||null)}catch(e){g(e instanceof Error?e.message:String(e))}finally{N(!1)}}}return(0,o.useEffect)(()=>{let e=new URLSearchParams(window.location.hash.substring(1)),t=e.get("access_token"),a=e.get("expires_in");if(t&&a){let e=Date.now()+1e3*parseInt(a);localStorage.setItem("spotify_access_token",t),localStorage.setItem("spotify_token_expiration",e.toString()),window.history.replaceState({},document.title,window.location.pathname)}let n=localStorage.getItem("spotify_access_token"),o=localStorage.getItem("spotify_token_expiration");(!n||!o||Date.now()>parseInt(o))&&(localStorage.removeItem("spotify_access_token"),localStorage.removeItem("spotify_token_expiration"),S.replace("/"))},[S]),(0,n.jsxs)("div",{children:[(0,n.jsx)(j,{}),(0,n.jsxs)(y.P.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.8},className:"flex flex-col md:flex-row items-center justify-center min-h-screen p-8 gap-8",children:[(0,n.jsxs)("div",{className:"glass-box",children:[(0,n.jsx)("h2",{className:"text-xl font-semibold mb-4 text-center",children:"Recommendations from Unfollowed Artists"}),(0,n.jsx)("button",{onClick:k,className:"bg-green-500 text-white px-6 py-2 rounded-md hover:bg-green-600 transition",children:"Get me recommendations from artists I donâ€™t follow"}),v?(0,n.jsx)(b.A,{color:"#10b981",loading:v,size:50,className:"mt-4"}):d?(0,n.jsxs)("p",{className:"mt-4 text-red-500",children:["Error: ",d]}):(0,n.jsx)("ul",{className:"list-disc text-left mt-4",children:l.length>0?l.map((e,t)=>(0,n.jsx)(y.P.li,{className:"text-lg",initial:{opacity:0,y:-10},animate:{opacity:1,y:0},transition:{delay:.1*t},children:e},t)):(0,n.jsx)("p",{children:"No genre-based recommendations found."})})]}),(0,n.jsx)("div",{className:"w-full md:w-[2px] h-[2px] md:h-full bg-gray-300"}),(0,n.jsxs)("div",{className:"glass-box",children:[(0,n.jsx)("h2",{className:"text-xl font-semibold mb-4 text-center",children:"Search for Music Recommendations"}),(0,n.jsxs)("div",{className:"flex flex-col items-center gap-2",children:[(0,n.jsx)("input",{type:"text",value:e,onChange:e=>t(e.target.value),className:"border p-2 w-80 rounded-md text-white",placeholder:"Search for an artist..."}),(0,n.jsx)("button",{onClick:I,className:"bg-blue-500 text-white px-4 py-2 rounded-md hover:bg-blue-600 transition",children:"Search"})]}),i&&(0,n.jsxs)(y.P.p,{className:"mt-4 text-lg font-semibold text-green-600",initial:{opacity:0,y:-10},animate:{opacity:1,y:0},transition:{duration:.3},children:["Matched Artist: ",i]}),w?(0,n.jsx)(b.A,{color:"#3b82f6",loading:w,size:50,className:"mt-4"}):f?(0,n.jsxs)("p",{className:"mt-4 text-red-500",children:["Error: ",f]}):(0,n.jsx)("ul",{className:"list-disc text-left mt-4",children:a.length>0?a.map((e,t)=>(0,n.jsx)(y.P.li,{className:"text-lg",initial:{opacity:0,y:-10},animate:{opacity:1,y:0},transition:{delay:.1*t},children:e},t)):(0,n.jsx)("p",{children:"No search results found."})})]})]})]})}},8510:(e,t,a)=>{Promise.resolve().then(a.bind(a,3263))}},e=>{var t=t=>e(e.s=t);e.O(0,[469,777,844,964,441,587,358],()=>t(8510)),_N_E=e.O()}]);